# Formal languages. Parsers

---

## Общее описание

Python библиотека для работы с контекстно-свободными грамматиками, включающая реализацию Эрли парсера, а также алгоритмов Кока-Янгера-Касами и приведения грамматики к Нормальной Форме Хомского.

---

## Сборка проекта

#### Linux

```bash
git clone git@github.com:20xygen/Parsers.git
cd Parsers
python3 main.py
```

#### Windows

```cmd
git clone git@github.com:20xygen/Parsers.git
cd Parsers
python main.py
```


---

## Зависимости

Данный проект не трубует подключения дополнительных библиотек. Функционал основывается только на стандартный пакет Python.

---

## Примеры

В файле [`main.py`](main.py) можно найти примеры работы с библиотекой. Они разделены на несколько категорий:

### Create grammar in a common way

Создание объектов грамматики вне абстрации чисел и символов. Объекты грамматики - объекты Python. Такой подход более гибкий, однако работать с ним сложнее.

- Grammar
- GrammarSymbol, NonTerminal, Terminal
- Rule

### Create grammar in a naive way

Создание грамматики из объекта "наивной грамматики". Наивная грамматика задается с помощью человекочитаемых символов.

- NaiveGrammar
- NaiveRule

### Create grammar by entering

Можно создать грамматику путем ввода в stdin описания грамматики в наивном виде.

### Chomsky Normal Form

Пример приведения грамматики к НФ Хомского с помощью объекта-нормализатора.

- ChomskyNormalizer

### Parsing. Earley parser

Парсинг с помощью Эрли-парсера. Метод fit задает грамматику, с которой будет работать парсер. После fit можно использовать predict для определение принадлежности слова выводимому грамматикой языку. Также предусмотрено согирования этапов парсинга с помощью соответствующего объекта.

- EarleyParser
- NaiveParser
- EarlyLogger

### Parsing. CYK algorithm

Парсинг с помощью алгоритма КЯГ. Методы fit и predict аналогичны. Как и в случае с Earley-парсером, для работы с наивными грамматиками используется объект-фасад наивный парсер.

- CYKParser

### Parsing. Interactive

В этой секции можно выбрать класс парсера (одну из двух реализаций) и тестировать его работу в интерактивном режиме.

### Формат входных данных для тестирования кода

1. В первой строке содержатся 3 целых числа `∣N∣`, `∣Z∣` и `∣P∣` — количество нетерминальных символов, терминальных символов и правил в порождающей грамматике.  
   Все числа неотрицательные и не превосходят 100.

2. Во второй строке содержатся `∣N∣` нетерминальных символов.  
   Нетерминальные символы являются заглавными латинскими буквами.

3. В третьей строке содержатся `∣Z∣` символов алфавита.  
   Символы являются строчными латинскими буквами, цифрами, скобками или знаками арифметических операций.

4. В каждой из следующих `P` строк записано одно правило грамматики в формате:  
   `левая часть правила -> правая часть правила`  
   Символ `epsilon`в правой части правила обозначается отсутствием правой части (концом строки после `->`).

5. Следующая строка состоит из одного нетерминального символа — стартового символа грамматики.

6. Следующая строка состоит из одного целого числа `m`,  
   где `1 ≤ m ≤ 100000` — количество слов, принадлежности которых языку надо проверить.

7. В каждой из следующих `m` строк содержится одно слово, состоящее из символов алфавита грамматики, принадлежность которого языку надо проверить.  

### Формат выходных данных для тестирования кода

Будет выведено `m` строк.  
`i`-ая строка содержит слово `Yes` (без кавычек), если `i`-ое слово из входных данных лежит в языке, порождаемом грамматикой, и `No` (без кавычек) иначе.

---

## Структура проекта

#### 1. **src** — основной код проекта.

##### **grammar** — модули, связанные с грамматиками.
- [`grammar.py`](src/grammar/grammar.py) — модуль с основными объектами грамматик.
- **utils** — утилитарные модули для работы с грамматикой.
  - [`interface.py`](src/grammar/utils/interface.py) — модуль для работы с грамматиками в наивном представлении.
  - [`representor.py`](src/grammar/utils/representor.py) — класс транслятора объект-символ.
- [`errors.py`](src/grammar/errors.py) — определения исключений, связанных с грамматикой.

##### **parsing** — модули, связанные с парсингом.
- [`parser.py`](src/parsing/parser.py) — определение интерфейса парсера.
- **implementations** — реализации различных алгоритмов парсинга.
  - **cyk** — реализация алгоритма CYK.
    - [`chomsky.py`](src/parsing/implementations/cyk/chomsky.py) — преобразование грамматики в НФ Хомского.
    - [`parser.py`](src/parsing/implementations/cyk/parser.py) — реализация CYK-парсера.
  - **earley** — реализация алгоритма Эрли.
    - [`parser.py`](src/parsing/implementations/earley/parser.py) — реализация парсера по алгоритму Эрли.
    - [`situation.py`](src/parsing/implementations/earley/situation.py) — модуль, описывающий ситуации в алгоритме Эрли.
    - [`utils.py`](src/parsing/implementations/earley/utils.py) — вспомогательные функции для алгоритма Эрли.
- **utils** — утилитарные модули, используемые разными парсерами.
  - [`interface.py`](src/parsing/utils/interface.py) — функции интерактивной работы с парсерами.

#### 2. **tests** — тесты для проверки корректности работы парсеров.

##### **data** — тестовые данные.
- [`test_data.json`](tests/data/test_data.json) — JSON-файл с тестовыми наборами данных для проверки алгоритмов.

##### **Модули тестирования**
- [`test_cyk.py`](tests/test_cyk.py) — тесты для CYK-парсера.
- [`test_earley.py`](tests/test_earley.py) — тесты для Эрли-парсера.
- **utils** — утилитарные модули для работы с тестами.
  - [`loader.py`](tests/utils/loader.py) — загрузка тестовых данных из JSON.

#### 3. **Корневые файлы**
- [`main.py`](main.py) — примеры использования библиотеки.
- [`README.md`](README.md) — документация проекта.
- [`.gitignore`](.gitignore) — игнорируемые файлы.

---

## Запуск тестов

Тесты находятся в деректории `tests`. Тестовые данные можно найти в [`test_data.json`](tests/data/test_data.json). Для запуска тестов напишите следующую команду в терминал, находясь при этом в корне:

### Linux

```bash
python3 -m unittest discover -s tests
```

### Windows

```cmd
python -m unittest discover -s tests
```
